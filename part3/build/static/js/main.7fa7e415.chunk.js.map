{"version":3,"sources":["Components/Person.js","Components/Persons.js","Components/PersonForm.js","Components/SearchFilter.js","services/persons.js","Components/Notification.js","App.js","index.js"],"names":["Person","person","deletePerson","name","number","onClick","id","Persons","persons","map","i","PersonForm","onSubmit","nameOnChange","numberOnChange","value","onChange","type","SearchFilter","url","modules","getAll","axios","get","then","response","data","create","PersonObject","post","update","updateObject","put","makeDelete","delete","Notification","message","className","App","useState","setPersons","filter","setFilter","newName","setNewName","newSearchName","setNewSearchName","newNumber","setNewNumber","Message","setMessage","useEffect","personService","initialPersons","catch","error","status","statusText","split","join","toLowerCase","indexOf","event","target","preventDefault","setTimeout","matches","length","window","confirm","updatedPerson","NewNameObject","concat","find","emptyObject","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7fa7e415.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) => \r\n    <p>{person.name} {person.number} <button onClick={() => deletePerson(person.id)}>Delete</button></p>\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({persons, deletePerson}) => persons.map((person,i) => \r\n                    <Person key={i} person={person} deletePerson={deletePerson} />)\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({onSubmit, name, nameOnChange, number, numberOnChange}) => \r\n  <form onSubmit={onSubmit}>\r\n    <div>\r\n      name: <input value={name} onChange={nameOnChange}/>\r\n    </div>\r\n    <div>\r\n      number: <input value={number} onChange={numberOnChange}  />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst SearchFilter = ({value, onChange}) => \r\n  <div>\r\n  Filter shown with: <input value={value} onChange={onChange}/>\r\n  </div>\r\nexport default SearchFilter","import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(url)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst create = (PersonObject) => {\r\n    const request = axios.post(url, PersonObject)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst update = (id, updateObject) => {\r\n    const request = axios.put(`${url}/${id}`, updateObject)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst makeDelete = (id) => {\r\n    const request = axios.delete(`${url}/${id}`)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst modules = {getAll, create, update, makeDelete}\r\n\r\nexport default modules","const Notification = ({message}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './Components/Persons'\nimport PersonForm from './Components/PersonForm'\nimport SearchFilter from './Components/SearchFilter'\nimport personService from './services/persons'\nimport Notification from './Components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ filter, setFilter ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newSearchName, setNewSearchName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ Message, setMessage ] = useState('')\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((initialPersons) => setPersons(initialPersons))\n      .catch((error) => setMessage(`Could not get data. Server response: ${error.response.status} ${error.response.statusText}`))\n  }, [])\n\n  useEffect(() => {\n    switch (newSearchName) {\n      case \"\":\n        setFilter(persons)\n        break;\n    \n      default:\n        //removes white space for each name\n        //then turns to lowercase\n        //then index compared to -1\n        setFilter(persons.filter((person) => \n        person.name\n        .split(/\\s+/)\n        .join('')\n        .toLowerCase()\n        .indexOf(newSearchName\n          .split(/\\s+/)\n          .join('')\n          .toLowerCase()) !== -1))\n        break;\n    }\n\n  }, [newSearchName, persons])\n\n\n\n  const HandleNewName = (event) => {\n    const newName = event.target.value\n    setNewName(newName)\n  }\n\n  const HandleSearchName = (event) => {\n    const newSearchName = event.target.value\n    setNewSearchName(newSearchName)\n  }\n\n  const HandleNewNumber = (event) => {\n    const newNumber = event.target.value\n    setNewNumber(newNumber)\n  }\n\n  const HandleSubmit = (event) => {\n    event.preventDefault()\n\n    if ( newName === \"\" || newNumber === \"\" ) {\n      setMessage(\"Empty field(s) detected!\")\n\n      setTimeout(() => {\n        setMessage(null)\n      }, 1000);\n      return\n    }\n\n    const matches = persons.filter((person) => person.name === newName)\n\n    if ( matches.length !== 0 ) {\n      if ( window.confirm(`${matches[0].name} already added to phonebook. Replace the old number with a new one?`) ) {\n        personService\n          .update(matches[0].id, {...matches[0], number: newNumber})\n          .then((updatedPerson) => {\n            setPersons(persons.map((person) => person.id === matches[0].id ? updatedPerson : person ))\n            setNewName('')\n            setNewNumber('')\n            setMessage(`${updatedPerson.name} has been successfully updated`)\n\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000);\n          })\n          .catch((error) => {\n            if (error.response.status === 404) {\n              setMessage(`${matches[0].name} was already removed from server`)\n              setPersons(persons.filter((person) => person.id !== matches[0].id))\n              setNewName('')\n              setNewNumber('')\n            } else {\n              setMessage(`${error.response.data.error}`)\n            }\n          \n            setTimeout(() => {\n              setMessage(null)\n            }, 5000);\n\n          })\n      }\n    } else {\n      const NewNameObject = {\n        name: newName,\n        number: newNumber\n      }\n  \n      personService\n        .create(NewNameObject)\n        .then((updatedPerson) => {\n          setPersons(persons.concat(updatedPerson))\n          setNewName('')\n          setNewNumber('') \n          setMessage(`${updatedPerson.name} has been added`)\n  \n          setTimeout(() => {\n            setMessage(null)\n          }, 5000);\n        })\n        .catch((error) => {\n          setMessage(`Error! Server says: ${error.response.status} ${error.response.statusText} ${error.response.data.error}`)\n        \n          setTimeout(() => {\n            setMessage(null)\n          }, 5000);\n        })\n    }\n\n    \n    \n\n  }\n\n  const DeletePerson = (id) => {\n    const name = filter.find((person) => person.id === id).name\n    \n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n      .makeDelete(id)\n      .then((emptyObject) => {\n        setPersons(persons.filter((person) => person.id !== id))\n\n        setMessage(`${name} has been deleted`)\n\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n      })\n      .catch((error) => {\n        setMessage(`Error! Server says: ${error.response.status} ${error.response.statusText}`)\n      \n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n      })\n    }\n    \n      \n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={Message} />\n\n      <SearchFilter value={newSearchName} onChange={HandleSearchName} />\n\n      <h2>Add a new</h2>\n      <PersonForm onSubmit={HandleSubmit} name={newName} nameOnChange={HandleNewName} number={newNumber} numberOnChange={HandleNewNumber} />\n      \n      <h2>Numbers</h2>\n      \n      <Persons persons={filter} deletePerson = {DeletePerson}/>\n    \n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}