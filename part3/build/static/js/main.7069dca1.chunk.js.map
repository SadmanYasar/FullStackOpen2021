{"version":3,"sources":["Components/Person.js","Components/Persons.js","Components/PersonForm.js","Components/SearchFilter.js","services/persons.js","Components/Notification.js","App.js","index.js"],"names":["Person","person","deletePerson","name","number","onClick","id","Persons","persons","map","PersonForm","onSubmit","nameOnChange","numberOnChange","value","onChange","type","SearchFilter","url","modules","getAll","axios","get","then","response","data","create","PersonObject","post","update","updateObject","put","makeDelete","delete","Notification","message","className","App","useState","setPersons","filter","setFilter","newName","setNewName","newSearchName","setNewSearchName","newNumber","setNewNumber","Message","setMessage","useEffect","personService","initialPersons","catch","error","status","statusText","split","join","toLowerCase","indexOf","event","target","preventDefault","setTimeout","matches","length","NewNameObject","updatedPerson","concat","window","confirm","find","emptyObject","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7069dca1.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) => \r\n    <p>{person.name} {person.number} <button onClick={() => deletePerson(person.id)}>Delete</button></p>\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({persons, deletePerson}) => persons.map((person) => \r\n                    <Person key={person.name} person={person} deletePerson={deletePerson} />)\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({onSubmit, name, nameOnChange, number, numberOnChange}) => \r\n  <form onSubmit={onSubmit}>\r\n    <div>\r\n      name: <input value={name} onChange={nameOnChange}/>\r\n    </div>\r\n    <div>\r\n      number: <input value={number} onChange={numberOnChange}  />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst SearchFilter = ({value, onChange}) => \r\n  <div>\r\n  Filter shown with: <input value={value} onChange={onChange}/>\r\n  </div>\r\nexport default SearchFilter","import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(url)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst create = (PersonObject) => {\r\n    const request = axios.post(url, PersonObject)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst update = (id, updateObject) => {\r\n    const request = axios.put(`${url}/${id}`, updateObject)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst makeDelete = (id) => {\r\n    const request = axios.delete(`${url}/${id}`)\r\n    return request.then((response) => response.data)\r\n}\r\n\r\nconst modules = {getAll, create, update, makeDelete}\r\n\r\nexport default modules","const Notification = ({message}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './Components/Persons'\nimport PersonForm from './Components/PersonForm'\nimport SearchFilter from './Components/SearchFilter'\nimport personService from './services/persons'\nimport Notification from './Components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ filter, setFilter ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newSearchName, setNewSearchName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ Message, setMessage ] = useState('')\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((initialPersons) => setPersons(initialPersons))\n      .catch((error) => setMessage(`Could not get data. Server response: ${error.response.status} ${error.response.statusText}`))\n  }, [])\n\n  useEffect(() => {\n    switch (newSearchName) {\n      case \"\":\n        setFilter(persons)\n        break;\n    \n      default:\n        //removes white space for each name\n        //then turns to lowercase\n        //then index compared to -1\n        setFilter(persons.filter((person) => \n        person.name\n        .split(/\\s+/)\n        .join('')\n        .toLowerCase()\n        .indexOf(newSearchName\n          .split(/\\s+/)\n          .join('')\n          .toLowerCase()) !== -1))\n        break;\n    }\n\n  }, [newSearchName, persons])\n\n\n\n  const HandleNewName = (event) => {\n    const newName = event.target.value\n    setNewName(newName)\n  }\n\n  const HandleSearchName = (event) => {\n    const newSearchName = event.target.value\n    setNewSearchName(newSearchName)\n  }\n\n  const HandleNewNumber = (event) => {\n    const newNumber = event.target.value\n    setNewNumber(newNumber)\n  }\n\n  const HandleSubmit = (event) => {\n    event.preventDefault()\n\n    if ( newName === \"\" || newNumber === \"\" ) {\n      setMessage(\"Empty field(s) detected!\")\n\n      setTimeout(() => {\n        setMessage(null)\n      }, 1000);\n      return\n    }\n\n    const matches = persons.filter((person) => person.name === newName)\n\n    if ( matches.length !== 0 ) {\n      if ( window.confirm(`${matches[0].name} already added to phonebook. Replace the old number with a new one?`) ) {\n        personService\n          .update(matches[0].id, {...matches[0], number: newNumber})\n          .then((updatedPerson) => {\n            setPersons(persons.map((person) => person.id === matches[0].id ? updatedPerson : person ))\n            setNewName('')\n            setNewNumber('')\n            setMessage(`${updatedPerson.name} has been successfully updated`)\n\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000);\n          })\n          .catch((error) => {\n            setMessage(`${matches[0].name} was already removed from server`)\n\n            setPersons(persons.filter((person) => person.id !== matches[0].id))\n            setNewName('')\n            setNewNumber('')\n\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000);\n\n            \n\n          })\n      }\n      return\n    }\n\n    const NewNameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    personService\n      .create(NewNameObject)\n      .then((updatedPerson) => {\n        setPersons(persons.concat(updatedPerson))\n        setNewName('')\n        setNewNumber('') \n        setMessage(`${updatedPerson.name} has been added`)\n\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n      })\n      .catch((error) => {\n        setMessage(`Error! Server says: ${error.response.status} ${error.response.statusText}`)\n      \n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n      })\n    \n\n  }\n\n  const DeletePerson = (id) => {\n    const name = filter.find((person) => person.id === id).name\n    \n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n      .makeDelete(id)\n      .then((emptyObject) => {\n        setPersons(persons.filter((person) => person.id !== id))\n\n        setMessage(`${name} has been deleted`)\n\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n      })\n      .catch((error) => {\n        setMessage(`Error! Server says: ${error.response.status} ${error.response.statusText}`)\n      \n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n      })\n    }\n    \n      \n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={Message} />\n\n      <SearchFilter value={newSearchName} onChange={HandleSearchName} />\n\n      <h2>Add a new</h2>\n      <PersonForm onSubmit={HandleSubmit} name={newName} nameOnChange={HandleNewName} number={newNumber} numberOnChange={HandleNewNumber} />\n      \n      <h2>Numbers</h2>\n      \n      <Persons persons={filter} deletePerson = {DeletePerson}/>\n    \n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}